# Product Catalog Service (Marketplace)
## Описание проекта

**Product Catalog Service** — это консольное приложение, реализующее внутренний сервис маркетплейса для управления каталогом товаров.

Приложение поддерживает:

- Добавление, редактирование, удаление и просмотр товаров
- Поиск и фильтрацию по категории, бренду и диапазону цен
- Авторизацию пользователей
- Аудит действий (логирование входа/выхода и бизнес-действий)
- Кеширование часто запрашиваемых данных
- Сохранение и загрузку товаров между запусками
- Простые метрики (время выполнения поиска, количество товаров)

Цель — продемонстрировать архитектуру, пригодную для расширения (например, переход на REST API без изменения бизнес-логики).

---

## Архитектура проекта

Проект построен на чистой архитектуре с разделением ответственности:

- `Main.java` — консольное меню и пользовательский интерфейс.
- `audit/` — логирование действий пользователей и системы.
- `cache/` — кеширование часто запрашиваемых данных.
- `controller/` - контроллеры для авторизации и вызова методов для работы с продуктами.
- `metrics/` — сбор метрик (время выполнения запросов, количество товаров).
- `model/` — модель продукта.
- `persistence/` — сохранение и загрузка данных между запусками программы.
- `repository/` - слой для хранения и получения продуктов.
- `service/` - сервисный слой авторизации и работы с продуктами (CRUD методы).
- `view/` - слой консольного отображения данных приложения для пользователя.

**Основные принципы:**

- **Single Responsibility:** каждый класс выполняет одну задачу
- **Low Coupling / High Cohesion:** минимальные зависимости
- **Легко расширяемо:** можно добавить REST API без переписывания логики
---

## Технологии

| Компонент | Используемая технология |
|------------|------------------------|
| Язык | Java 17+ |
| Хранение данных | CSV-файл (`products.csv`) |
| Коллекции | Map, List, EnumMap, LinkedHashMap |
| Кеширование | EnumMap<CacheType, Map<String, List<Product>>> |
| Метрики | System.currentTimeMillis |
| Авторизация | In-memory (Map<String, String>) |
| Логирование | Консольное (AuditLogger) |

---

## Запуск проекта

1. **Склонируйте репозиторий:**
   ```bash
   git clone https://github.com/username/product-catalog-service.git
   cd product-catalog-service

2. **Скомпилируйте проект:**
    ```bash
   javac -d out src/com/bestapp/com/**/*.java
   
3. **Запустите приложение:**
   ```bash
   java -cp out com.bestapp.com.Main
4. **Авторизация:**
   * Username: admin
   * Password: admin

5. **При первом запуске создаётся (если отсутствует) файл products.csv.**

## Возможности приложения
### Авторизация

- Вход в систему (login)

- Выход из системы (logout)

- Предустановленные пользователи:

    - admin / admin
    - user1 / password1

### Управление товарами

| Функция | Описание |
|------------|-----------------------|
| Добавить товар | Создаёт новый товар |
| Изменить товар | Обновляет данные по ID |
| Удалить товар | Удаляет товар по ID |
| Просмотреть товары | Отображает весь каталог |
| Сохранение данных | Автоматическое при выходе |

### Поиск и фильтрация

- Поиск по категории

- Поиск по бренду

- Поиск по диапазону цен

Результаты кешируются для ускорения повторных запросов.

### Кеширование

- Первый запрос сохраняет результат в кеше

- Повторный запрос — мгновенный доступ

- Кеш сбрасывается при изменении каталога

#### Типы кеша:

- CATEGORY
- BRAND
- PRICE
- ALL

Метрики:

- Количество cache hits/misses

- Очистка кеша при изменениях

### Метрики

- Время выполнения поиска (в миллисекундах)

- Количество товаров в каталоге

- Количество cache hits/misses

### Формат хранения данных

Файл products.csv хранится в корне проекта и имеет структуру:
```bash
id;name;description;price;category;brand;stockQuantity

